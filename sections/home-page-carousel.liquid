{{ 'splide-core.min.css' | asset_url | stylesheet_tag }}
<script src="{{ 'splide.min.js' | asset_url }}" defer="defer"></script>
<div class="home-page__carousel-wrapper h-full">
  <div class="splide h-full">
    <div class="splide__track h-full">
      <ul class="splide__list h-full">
        {%- for block in section.blocks -%}
          <li class="splide__slide relative h-full" data-url="{{ block.settings.btn_url }}">
            <div class="absolute top-0 left-0 w-full h-full">
              {{
                block.settings.carousel_image
                | image_url: width: 416
                | image_tag: widths: '324, 493, 600, 713, 823, 990, 1100,', class: 'w-full h-full object-cover'
                | escape
              }}
            </div>
            <div class="relative z-[1] h-full home-page__carousel-content text-center text-black pt-[35vh] duration-300 ease-in-out opacity-0">
              {%- if block.settings.carouse_label -%}
                <div class="home-page__carousel-content-label mb-[18px]">
                  <h2 class="font-semibold leading-none text-[40px] tracking-widerx">
                    {{ block.settings.carouse_label }}
                  </h2>
                </div>
              {%- endif -%}
              {%- if block.settings.carouse_heading -%}
                <div class="home-page__carousel-content-label leading-none">
                  <h2 class="text-[37px] tracking-widerx font-normal">{{ block.settings.carouse_heading }}</h2>
                </div>
              {%- endif -%}
            </div>
          </li>
        {%- endfor -%}
      </ul>
    </div>
    <div class="home-page__carousel-wrapper-btn absolute z-[2] flex flex-col items-center w-full">
      {% assign first_block = section.blocks | first %}
      <div class="mb-7">
        <a href="{{ first_block.settings.btn_url }}" class="btn main-btn btn_white-outlined">
          {{ section.settings.button_title }}
        </a>
      </div>
      <ul class="splide__pagination"></ul>
    </div>
  </div>
  <div class="absolute bottom-0 w-full flex flex-col items-center mb-2.5">
    <div class="text-center mb-[3px]">
      <strong class="font-coutureBold tracking-widerx text-sm">LATTEST</strong>
    </div>
    <div>
      <span class="icon-FULL-ICON-SET-WEBSITE-FINAL_Dropdown-arrow !font-extrabold text-xl"></span>
    </div>
  </div>
</div>
<script>
  document.addEventListener('DOMContentLoaded', function () {
    const homePageCarousel = new Splide('.splide', {
      arrows: false,
      type: 'loop',
      speed: 600,
      mediaQuery: 'min',
      perMove: 1,
      breakpoints: {
        1024: {
          destroy: true,
        },
      },
    });
    homePageCarousel.mount();

    homePageCarousel.on('active', function (slide) {
      var activeSlide = slide.slide;
      var dataUrl = activeSlide.getAttribute('data-url');
      var mainBtn = document.querySelector('.main-btn');
      mainBtn.setAttribute('href', dataUrl);
    });
  });
</script>

{% schema %}
{
  "name": "Home Page Carousel",
  "tag": "section",
  "class": "section home-page__carousel absolute top-0 left-0 w-full h-screen",
  "settings": [
    {
      "type": "inline_richtext",
      "id": "button_title",
      "label": "Button Title",
      "default": "SHOP NOW"
    }
  ],
  "blocks": [
    {
      "type": "carousel_item",
      "name": "Carousel Item",
      "settings": [
        {
          "type": "image_picker",
          "id": "carousel_image",
          "label": "Carousel Image"
        },
        {
          "type": "inline_richtext",
          "id": "carouse_label",
          "label": "Label",
          "default": "NEW"
        },
        {
          "type": "inline_richtext",
          "id": "carouse_heading",
          "label": "SUPREMATIST",
          "default": "SLIDE TITLE"
        },
        {
          "type": "url",
          "id": "btn_url",
          "label": "Button URL"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Home Page Carousel"
    }
  ]
}
{% endschema %}
