<div class="artis-page custom-page max-md:px-0 max-lg:px-4">
  <div
    id="bar"
    class="ds_element dissapearing custom-page__heading artist-page__heading max-lg:pt-[7px] max-lg:pb-[8px] fixed top-[54px] lg:top-[27px] bg-gray-10 lg:bg-white max-lg:duration-300 max-lg:ease-in-out"
  >
    <h1 class="font-coutureBold text-[19px] md:text-3xl max-lg:leading-none uppercase text-center">
      {{ page.title | escape }}
    </h1>
  </div>
  <div class="artist-page__body custom-page__body max-md:pt-[34px] max-lg:pt-[56px] pb-[90px]">
    {%- if section.settings.first_image != blank or section.settings.second_image != blank -%}
      <div class="custom-page__images{% if section.settings.second_image != blank %} max-md:gap-6 grid md:grid-cols-2{% endif %}{% if settings.animations_reveal_on_scroll %} scroll-trigger animate--slide-in{% endif %}">
        {%- if section.settings.first_image != blank -%}
          {%- liquid
            assign image_height = section.settings.first_image.width | divided_by: section.settings.first_image.aspect_ratio
            assign full_width = '50vw'
            assign widths = '768, 1090, 1240, 1440, 1560'
            assign image_class = 'w-full h-full object-cover'
          -%}
          <div class="custom-page__images-first aspect-square{% unless section.settings.second_image %} max-w-[650px]{% endunless %}">
            {{
              section.settings.first_image
              | image_url: width: 1560
              | image_tag:
                width: section.settings.first_image.width,
                height: image_height,
                class: image_class,
                sizes: full_width,
                widths: widths
            }}
          </div>
        {%- endif -%}
        {%- if section.settings.second_image != blank -%}
          {%- liquid
            assign image_height = section.settings.second_image.width | divided_by: section.settings.second_image.aspect_ratio
            assign full_width = '50vw'
            assign widths = '768, 1090, 1240, 1440, 1560'
            assign image_class = 'w-full h-full object-cover'
          -%}
          <div class="custom-page__images-second aspect-square">
            {{
              section.settings.second_image
              | image_url: width: 1560
              | image_tag:
                width: section.settings.second_image.width,
                height: image_height,
                class: image_class,
                sizes: full_width,
                widths: widths
            }}
          </div>
        {%- endif -%}
      </div>
    {%- endif -%}
    <div class="custom-page__content max-md:px-2{% if settings.animations_reveal_on_scroll %} scroll-trigger animate--slide-in{% endif %}">
      {{ page.content }}
    </div>
    <div class="artist-page__contacts max-md:px-2{% if settings.animations_reveal_on_scroll %} scroll-trigger animate--slide-in{% endif %}">
      <div class="artist-page__contacts-contact flex justify-center">
        <button class="btn btn_primary btn_small w-[360px] max-w-full contact-us">Contact the artist</button>
      </div>
    </div>
    {%- if section.settings.facebook_url != blank
      or section.settings.instagram_url != blank
      or section.settings.pinterest_url != blank
    -%}
      <div class="artist-page__socials flex justify-center py-9 gap-2.5 max-md:justify-around max-md:px-5{% if settings.animations_reveal_on_scroll %} scroll-trigger animate--slide-in{% endif %}">
        {%- if section.settings.facebook_url != blank -%}
          <a
            href="{{ section.settings.facebook_url }}"
            target="_blank"
            class="artist-page__social-item flex flex-col items-center md:min-w-[132px]"
          >
            <div class="mb-3.5">
              <span class="icon-FULL-ICON-SET-WEBSITE-FINAL_Facebook  text-2xl md:text-[32px]"> </span>
            </div>
            <div>
              <span class="whitespace-nowrap text-sm md:text-[15px] font-bold tracking-[.1em]">
                {{- section.settings.facebook_nickname -}}
              </span>
            </div>
          </a>
        {%- endif -%}
        {%- if section.settings.instagram_url != blank -%}
          <a
            href="{{ section.settings.instagram_url }}"
            target="_blank"
            class="artist-page__social-item flex flex-col items-center md:min-w-[132px]"
          >
            <div class="mb-3.5">
              <span class="icon-FULL-ICON-SET-WEBSITE-FINAL_Instagram text-2xl md:text-[32px]"> </span>
            </div>
            <div>
              <span class="whitespace-nowrap text-sm md:text-[15px] font-bold tracking-[.1em]">
                {{- section.settings.instagram_nickname -}}
              </span>
            </div>
          </a>
        {%- endif -%}
        {%- if section.settings.pinterest_url != blank -%}
          <a
            href="{{ section.settings.pinterest_url }}"
            target="_blank"
            class="artist-page__social-item flex flex-col items-center md:min-w-[132px]"
          >
            <div class="mb-3.5">
              <span class="icon-FULL-ICON-SET-WEBSITE-FINAL_Pinterest text-2xl md:text-[32px]"> </span>
            </div>
            <div>
              <span class="whitespace-nowrap text-sm md:text-[15px] font-bold tracking-[.1em]">
                {{- section.settings.pinterest_nickname -}}
              </span>
            </div>
          </a>
        {%- endif -%}
      </div>
    {%- endif -%}
  </div>
</div>
<div class="contact-us__modal hidden fixed top-0 left-0 w-full h-[100dvh] z-[99999]">
  <div class="relative w-full h-full flex pt-[65px] pb-6 overflow-y-auto">
    <div class="relative md:my-auto cart-notification-wrapper left-[50%] lg:left-[62.3%] -translate-x-1/2 w-[94%] md:w-full max-w-[365px] md:max-w-[471px]">
      <button
        type="button"
        class="contact-us__modal-close modal__close-button absolute bottom-full mb-[11px] right-0 w-7 md:w-[34px] h-7 md:h-[34px] rounded-full leading-none flex justify-center items-center cursor-pointer"
        aria-label="{{ 'accessibility.close' | t }}"
      >
        <span class="icon-FULL-ICON-SET-WEBSITE-FINAL_Grey-X-Button text-[28px] md:text-[34px]"
          ><span class="path1"></span><span class="path2"></span
        ></span>
      </button>
      <div
        class="border border-black bg-white px-[7px] md:px-2.5 pt-[17px] md:pt-5 contact-us__modal-wrapper modal-wrapper w-full"
        aria-modal="true"
        role="dialog"
        tabindex="-1"
      >
        <div class="contact-us__modal-heading text-center mb-[21px] md:mb-[30px]">
          <p class="text-[15px] md:text-[19px] tracking-widest font-normal uppercase leading-none mb-6 md:mb-[44px]">
            You Are contacting
          </p>
          {% assign full_string = page.title %}
          {% assign words_array = full_string | split: ' ' %}
          {% assign artist = words_array[0] %}
          <h2 class="font-coutureBold text-[32px] max-md:tracking-wide md:text-[42px] leading-none tracking-[.1em] font-bold">
            {{ artist }}
          </h2>
          <div>
            <span class="icon-FULL-ICON-SET-WEBSITE-FINAL_Small-Envelope text-[44px] md:text-[60px]"> </span>
          </div>
        </div>

        <div class="contact-us__modal-body">
          {% assign page_url = page.url | append: '#contact-artist-form' %}
          {% form 'contact', id: 'contact-artist-form', return_to: page_url %}
            <input
              class="absolute top-0 left-0 w-0 h-0 p-0 invisible"
              type="text"
              name="contact[artist]"
              id="artist"
              value="Contacting {{ artist }}"
            >
            <div class="contact-subject contact-us__item">
              <div class="blcok uppercase pl-2.5 font-axis font-extrabold text-[10px] md:text-[13px]">Regarding</div>
              <div class="custom-select custom-select_w-full relative">
                <div class="select-trigger cursor-pointer border border-black flex h-[30px] md:h-12">
                  <div class="flex items-center pl-2.5 flex-1">
                    <span class="selected-text line-clamp-1 text-[10px] md:text-sm text-gray-750 font-open uppercase">
                      Collaboration
                    </span>
                  </div>
                  <div class="w-11 select-icon border-black flex items-center justify-center">
                    <span
                      class="icon-FULL-ICON-SET-WEBSITE-FINAL_Next-Button-Arrow font-semibold text-xs duration-100 ease-in-out"
                    ></span>
                  </div>
                </div>
                <ul class="select-options select-options_w-full hidden absolute z-[2] top-full left-0 border border-t-0 border-black bg-white">
                  <li class="custom-option selected">
                    <label class="cursor-pointer px-2.5 h-[30px] md:h-11 flex items-center duration-200 ease-in-out">
                      <input
                        checked
                        type="radio"
                        name="contact[regarding]"
                        value="Collaboration"
                        class="invisible w-0 h-0"
                      >
                      <span class="line-clamp-1 text-[10px] md:text-sm text-gray-750 font-open uppercase"
                        >Collaboration</span
                      >
                    </label>
                  </li>
                  <li class="custom-option">
                    <label class="cursor-pointer px-2.5 h-[30px] md:h-11 flex items-center duration-200 ease-in-out">
                      <input type="radio" name="contact[regarding]" value="Commission" class="invisible w-0 h-0">
                      <span class="line-clamp-1 text-[10px] md:text-sm text-gray-750 font-open uppercase"
                        >Commission</span
                      >
                    </label>
                  </li>
                  <li class="custom-option">
                    <label class="cursor-pointer px-2.5 h-[30px] md:h-11 flex items-center duration-200 ease-in-out">
                      <input
                        type="radio"
                        name="contact[regarding]"
                        value="Interview"
                        class="invisible w-0 h-0"
                      >
                      <span class="line-clamp-1 text-[10px] md:text-sm text-gray-750 font-open uppercase"
                        >Interview</span
                      >
                    </label>
                  </li>
                  <li class="custom-option">
                    <label class="cursor-pointer px-2.5 h-[30px] md:h-11 flex items-center duration-200 ease-in-out">
                      <input type="radio" name="contact[regarding]" value="Other" class="invisible w-0 h-0">
                      <span class="line-clamp-1 text-[10px] md:text-sm text-gray-750 font-open uppercase">Other</span>
                    </label>
                  </li>
                </ul>
              </div>
            </div>
            <div class="contact-message contact-us__item">
              <div class="flex items-end pl-2.5 justify-between">
                <label for="message" class="blcok uppercase font-axis font-extrabold text-[10px] md:text-[13px]"
                  >Your Message</label
                >
                <div class="form-errors hidden text-[10px] md:text-[13px]" id="message-error">
                  <span> *Field required </span>
                </div>
              </div>
              <textarea class="block w-full py-2" name="contact[message]" id="message"></textarea>
            </div>
            <div class="contact-email contact-us__item">
              <div class="flex justify-between">
                <label for="email" class="blcok uppercase pl-2.5 font-axis font-extrabold text-[10px] md:text-[13px]"
                  >Email</label
                >
                <span class="text-right text-[10px] md:text-[13px] font-bold line-clamp-1 max-w-[60%]">
                  *You will be contacted back on this email address
                </span>
              </div>
              <div class="relative">
                <input
                  class="block w-full"
                  type="email"
                  name="contact[email]"
                  id="email"
                  value="{% if form.email %}{{ form.email }}{% elsif customer %}{{ customer.email }}{% endif %}"
                >
                <div
                  class="tooltip absolute top-full -left-4 sm:left-0 mt-2.5 whitespace-nowrap bg-white border border-black py-[5px] sm:py-2 px-1 sm:pr-[6px] sm:pl-[8px] duration-300 transition-all ease-in-out opacity-0 invisible"
                  id="email-tooltip"
                >
                  <div class="flex items-center">
                    <div class="w-5 sm:w-7 h-5 sm:h-7 mr-[7px]">
                      {%- render 'icon-info' -%}
                    </div>
                    <p class="leading-none text-[10px] sm:text-[15px] tracking-wider font-open">
                      Please write a valid email address to be able to receive replies.
                    </p>
                  </div>
                </div>
              </div>
            </div>

            <div class="submit pb-[12px] md:pb-4">
              <button
                type="button"
                class="btn btn_primary w-full max-w-[90%] md:max-w-80 !block mx-auto cursor-pointer !pb-[11px] !pt-[11px]"
                id="submit-button"
              >
                SUBMIT MESSAGE
              </button>
            </div>
          {% endform %}
        </div>
      </div>
    </div>
  </div>
</div>
<div class="removed-wishlist__modal hidden fixed top-1/2 left-[50%] lg:left-[62.3%] -translate-x-1/2 -translate-y-1/2 z-10 w-[96%] md:w-full max-w-fit">
  <div
    class="border border-[#5a5a5a] bg-white px-4 py-3.5 removed-wishlist__modal-wrapper w-full"
    aria-modal="true"
    role="dialog"
    tabindex="-1"
  >
    <div class="removed-wishlist__modal-heading text-center">
      <h2 class="text-[21px] sm:text-[24px] uppercase tracking-xwidest whitespace-nowrap">Message Sent</h2>
    </div>
  </div>
</div>
<script>
  document.addEventListener('DOMContentLoaded', function () {
    const contactOpen = document.querySelector('.contact-us'),
      contactModal = document.querySelector('.contact-us__modal'),
      contactClose = document.querySelector('.contact-us__modal-close'),
      contactWrapper = document.querySelector('.contact-us__modal-wrapper'),
      bodyEl = document.querySelector('body');

    contactOpen.addEventListener('click', () => {
      contactModal.classList.remove('hidden');
      bodyEl.classList.add('overflow-hidden');
    });

    contactClose.addEventListener('click', () => {
      contactModal.classList.add('hidden');
      bodyEl.classList.remove('overflow-hidden');
    });
    document.addEventListener('click', function (e) {
      const target = e.target;
      const customSelect = target.closest('.custom-select');
      const allCustomSelects = document.querySelectorAll('.custom-select');

      // Clicking on the trigger toggles the current dropdown and closes others
      if (customSelect && target.closest('.select-trigger')) {
        // Close all dropdowns first
        allCustomSelects.forEach((select) => {
          if (select !== customSelect) {
            select.classList.remove('open');
          }
        });
        // Toggle the clicked custom select
        customSelect.classList.toggle('open');
      } else if (customSelect && target.tagName === 'INPUT' && target.type === 'radio') {
        // Remove selected class from all options
        customSelect.querySelectorAll('li').forEach((li) => {
          li.classList.remove('selected');
        });

        // Add selected class to parent li of the checked radio
        target.closest('li').classList.add('selected');

        // Update the trigger text and close the dropdown
        const selectedText = target.nextElementSibling.textContent;
        customSelect.querySelector('.selected-text').textContent = selectedText;
        customSelect.classList.remove('open');
      } else {
        // Clicking outside any custom select should close all
        allCustomSelects.forEach((select) => {
          select.classList.remove('open');
        });
      }
    });
    const form = document.querySelector('#contact-artist-form');
    const emailInput = document.getElementById('email');
    const messageInput = document.getElementById('message');
    const emailTooltip = document.getElementById('email-tooltip');
    const messageError = document.getElementById('message-error');
    const submitButton = document.getElementById('submit-button');

    submitButton.addEventListener('click', function (event) {
      let valid = true;

      // Validate email
      const emailValue = emailInput.value.trim();
      if (emailValue === '' || !validateEmail(emailValue)) {
        emailTooltip.classList.remove('opacity-0', 'invisible');
        valid = false;
        setTimeout(() => {
          emailTooltip.classList.add('opacity-0', 'invisible');
        }, 1500);
      } else {
        emailTooltip.classList.add('opacity-0', 'invisible');
      }

      // Validate message
      const messageValue = messageInput.value.trim();
      if (messageValue === '') {
        messageError.classList.remove('hidden');
        valid = false;
      } else {
        messageError.classList.add('hidden');
      }

      if (valid) {
        form.submit(); // Submit the form if validation passes
      }
    });

    // Function to validate email format
    function validateEmail(email) {
      const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
      return re.test(String(email).toLowerCase());
    }
    if (window.location.hash === '#contact-artist-form') {
      const instructionsSent = document.querySelector('.removed-wishlist__modal');
      if (instructionsSent) {
        instructionsSent.classList.remove('hidden');
        setTimeout(() => {
          instructionsSent.classList.add('hidden');
        }, 1000); // Wait for 1 second before hiding the modal
        history.replaceState(null, null, ' ');
      }
    }
  });
</script>

{% schema %}
{
  "name": "Artist Page",
  "tag": "section",
  "class": "section",
  "settings": [
    {
      "type": "image_picker",
      "id": "first_image",
      "label": "First Image"
    },
    {
      "type": "image_picker",
      "id": "second_image",
      "label": "Second Image"
    },
    {
      "type": "inline_richtext",
      "id": "facebook_nickname",
      "label": "Facebook Nickname"
    },
    {
      "type": "url",
      "id": "facebook_url",
      "label": "Facebook URL"
    },
    {
      "type": "inline_richtext",
      "id": "instagram_nickname",
      "label": "Instagram Nickname"
    },
    {
      "type": "url",
      "id": "instagram_url",
      "label": "Instagram URL"
    },
    {
      "type": "inline_richtext",
      "id": "pinterest_nickname",
      "label": "Pinterest Nickname"
    },
    {
      "type": "url",
      "id": "pinterest_url",
      "label": "Pinterest URL"
    }
  ],
  "presets": [
    {
      "name": "Artist Page"
    }
  ]
}
{% endschema %}
