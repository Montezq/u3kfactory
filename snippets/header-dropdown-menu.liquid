{% comment %}
  Renders a standard dropdown style menu for the header.

  Usage:
  {% render 'header-dropdown-menu' %}
{% endcomment %}

<nav>
  <accordion-list>
    <ul role="list" class="space-y-3.5">
      {%- for link in section.settings.menu.links -%}
        <li>
          {%- if link.links != blank -%}
            <accordion-item
              {% if link.child_active %}
                data-open
              {% endif %}
            >
              <div
                id="HeaderMenu-{{ link.handle }}"
                class="header__menu-item accordion-toggle cursor-pointer"
              >
                <span
                  class="inline-block font-coutureBold tracking-widerx text-[29px] uppercase leading-none relative after:content-[''] after:block after:w-full after:h-[1px] after:absolute after:left-[110%] after:top-1/2{%- if link.child_active %} header__active-menu-item{% endif %}"
                >
                  {{- link.title | escape -}}
                </span>
              </div>
              <div
                class="accordion-content overflow-hidden{% if link.child_active %}  open-initially{%  else %} h-0 transition-all duration-300 ease-in-out{% endif %}"
              >
                <ul
                  id="HeaderMenu-MenuList-{{ forloop.index }}"
                  class="space-y-1 pb-[30px] pt-2"
                  role="list"
                  tabindex="-1"
                >
                  {%- for childlink in link.links -%}
                    <li>
                      {%- if childlink.links == blank -%}
                        <a
                          id="HeaderMenu-{{ link.handle }}-{{ childlink.handle }}"
                          href="{{ childlink.url }}"
                          class="font-coutureBold text-[23px] text-gray-200 uppercase{% if childlink.current %} list-menu__item--active{% endif %}"
                          {% if childlink.current %}
                            aria-current="page"
                          {% endif %}
                        >
                          {{ childlink.title | escape }}
                        </a>
                      {%- endif -%}
                    </li>
                  {%- endfor -%}
                </ul>
              </div>
            </accordion-item>
          {%- else -%}
            <a
              id="HeaderMenu-{{ link.handle }}"
              href="{{ link.url }}"
              class="header__menu-item list-menu__item link link--text focus-inset"
              {% if link.current %}
                aria-current="page"
              {% endif %}
            >
              <span
                {%- if link.current %}
                  class="header__active-menu-item"
                {% endif %}
              >
                {{- link.title | escape -}}
              </span>
            </a>
          {%- endif -%}
        </li>
      {%- endfor -%}
    </ul>
  </accordion-list>
</nav>
